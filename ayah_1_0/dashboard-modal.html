<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuri - Progress Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --ayah-primary: #6048EB;
            --ayah-primary-hover: #4F3BC9;
            --ayah-primary-light: #F4F1FF;
            --ayah-primary-dark: #043178;
        }
        .bg-ayah-primary { background-color: var(--ayah-primary); }
        .text-ayah-primary { color: var(--ayah-primary); }
        .border-ayah-primary { border-color: var(--ayah-primary); }
        .hover\:bg-ayah-primary:hover { background-color: var(--ayah-primary-hover); }
        
        .modal-enter {
            animation: modalEnter 0.3s ease-out;
        }
        
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Modal Overlay -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <!-- Modal Content -->
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden modal-enter">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-nuri-primary rounded-full flex items-center justify-center">
                        <i data-lucide="bar-chart-3" class="w-5 h-5 text-white"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">Progress Dashboard</h2>
                        <p class="text-sm text-gray-600">Track your wellness journey</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <select class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nuri-primary focus:border-transparent text-sm">
                        <option>Last 7 days</option>
                        <option>Last 30 days</option>
                        <option>Last 3 months</option>
                        <option>Last year</option>
                    </select>
                    <button onclick="closeModal()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-gray-500"></i>
                    </button>
                </div>
            </div>
            
            <!-- Modal Body -->
            <div class="p-6 max-h-[calc(90vh-180px)] overflow-y-auto">
                <!-- Overview Cards -->
                <div class="grid grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <i data-lucide="target" class="w-8 h-8"></i>
                            <span class="text-2xl font-bold">85%</span>
                        </div>
                        <h3 class="text-lg font-semibold mb-1">Weekly Goals</h3>
                        <p class="text-sm opacity-90">4 of 5 completed</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <i data-lucide="flame" class="w-8 h-8"></i>
                            <span class="text-2xl font-bold">12</span>
                        </div>
                        <h3 class="text-lg font-semibold mb-1">Day Streak</h3>
                        <p class="text-sm opacity-90">Keep it going!</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <i data-lucide="coins" class="w-8 h-8"></i>
                            <span class="text-2xl font-bold">1,250</span>
                        </div>
                        <h3 class="text-lg font-semibold mb-1">Total Tokens</h3>
                        <p class="text-sm opacity-90">+150 this week</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <i data-lucide="trending-up" class="w-8 h-8"></i>
                            <span class="text-2xl font-bold">+15%</span>
                        </div>
                        <h3 class="text-lg font-semibold mb-1">Improvement</h3>
                        <p class="text-sm opacity-90">vs last week</p>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="grid grid-cols-2 gap-6 mb-8">
                    <!-- Mood Trends -->
                    <div class="bg-white rounded-xl p-6 shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Mood Trends</h3>
                            <button class="text-sm text-nuri-primary hover:text-nuri-primary">View Details</button>
                        </div>
                        <div class="relative h-48">
                            <canvas id="moodChart"></canvas>
                        </div>
                    </div>

                    <!-- Activity Overview -->
                    <div class="bg-white rounded-xl p-6 shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Activity Overview</h3>
                            <button class="text-sm text-nuri-primary hover:text-nuri-primary">View Details</button>
                        </div>
                        <div class="relative h-48">
                            <canvas id="activityChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Rings -->
                <div class="grid grid-cols-3 gap-6 mb-8">
                    <!-- Nutrition Progress -->
                    <div class="bg-white rounded-xl p-6 shadow-sm text-center">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Nutrition Goals</h3>
                        <div class="relative inline-block mb-4">
                            <svg class="w-32 h-32 progress-ring">
                                <circle cx="64" cy="64" r="28" stroke="#e5e7eb" stroke-width="6" fill="transparent"/>
                                <circle cx="64" cy="64" r="28" stroke="var(--ayah-primary)" stroke-width="6" fill="transparent"
                                        class="progress-ring-circle" style="stroke-dasharray: 176; stroke-dashoffset: 35;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-2xl font-bold text-ayah-primary">80%</span>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600">4 of 5 daily goals met</p>
                    </div>
                    
                    <!-- Exercise Progress -->
                    <div class="bg-white rounded-xl p-6 shadow-sm text-center">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Exercise Goals</h3>
                        <div class="relative inline-block mb-4">
                            <svg class="w-32 h-32 progress-ring">
                                <circle cx="64" cy="64" r="28" stroke="#e5e7eb" stroke-width="6" fill="transparent"/>
                                <circle cx="64" cy="64" r="28" stroke="var(--ayah-primary)" stroke-width="6" fill="transparent"
                                        class="progress-ring-circle" style="stroke-dasharray: 176; stroke-dashoffset: 70;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-2xl font-bold text-ayah-primary">60%</span>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600">3 of 5 workouts completed</p>
                    </div>
                    
                    <!-- Wellness Progress -->
                    <div class="bg-white rounded-xl p-6 shadow-sm text-center">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Wellness Goals</h3>
                        <div class="relative inline-block mb-4">
                            <svg class="w-32 h-32 progress-ring">
                                <circle cx="64" cy="64" r="28" stroke="#e5e7eb" stroke-width="6" fill="transparent"/>
                                <circle cx="64" cy="64" r="28" stroke="var(--ayah-primary-dark)" stroke-width="6" fill="transparent"
                                        class="progress-ring-circle" style="stroke-dasharray: 176; stroke-dashoffset: 18;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-2xl font-bold" style="color: var(--ayah-primary-dark);">90%</span>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600">Daily tracking consistent</p>
                    </div>
                </div>
                
                <!-- Recent Achievements -->
                <div class="bg-white rounded-xl p-6 shadow-sm mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Achievements</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="flex items-center space-x-4 p-4 bg-yellow-50 rounded-lg">
                            <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                <i data-lucide="award" class="w-6 h-6 text-yellow-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">12-Day Streak</h4>
                                <p class="text-sm text-gray-600">Consistent daily tracking</p>
                                <p class="text-xs text-yellow-600">+100 tokens earned</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 p-4 bg-green-50 rounded-lg">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                <i data-lucide="target" class="w-6 h-6 text-green-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Nutrition Master</h4>
                                <p class="text-sm text-gray-600">Met weekly nutrition goals</p>
                                <p class="text-xs text-green-600">+75 tokens earned</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 p-4 bg-blue-50 rounded-lg">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                <i data-lucide="dumbbell" class="w-6 h-6 text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Fitness Enthusiast</h4>
                                <p class="text-sm text-gray-600">5 workouts this week</p>
                                <p class="text-xs text-blue-600">+50 tokens earned</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 p-4 bg-purple-50 rounded-lg">
                            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                <i data-lucide="clock" class="w-6 h-6 text-purple-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Fasting Champion</h4>
                                <p class="text-sm text-gray-600">Completed 7 fasts</p>
                                <p class="text-xs text-purple-600">+125 tokens earned</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Weekly Summary -->
                <div class="bg-white rounded-xl p-6 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">This Week's Summary</h3>
                    <div class="grid grid-cols-7 gap-2">
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Mon</div>
                            <div class="w-8 h-8 bg-nuri-primary rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="check" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="text-xs text-gray-600">5/5 goals</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Tue</div>
                            <div class="w-8 h-8 bg-nuri-primary rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="check" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="text-xs text-gray-600">4/5 goals</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Wed</div>
                            <div class="w-8 h-8 bg-nuri-primary rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="check" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="text-xs text-gray-600">5/5 goals</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Thu</div>
                            <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="minus" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="text-xs text-gray-600">3/5 goals</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Fri</div>
                            <div class="w-8 h-8 bg-nuri-primary rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="check" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="text-xs text-gray-600">4/5 goals</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Sat</div>
                            <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="clock" class="w-4 h-4 text-gray-500"></i>
                            </div>
                            <div class="text-xs text-gray-600">Today</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-600 mb-2">Sun</div>
                            <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-1">
                                <i data-lucide="calendar" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="text-xs text-gray-600">Planned</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50">
                <div class="flex items-center space-x-4">
                    <button class="text-nuri-primary hover:text-nuri-primary font-medium text-sm">
                        <i data-lucide="download" class="w-4 h-4 inline mr-1"></i>
                        Export Data
                    </button>
                    <button class="text-nuri-primary hover:text-nuri-primary font-medium text-sm">
                        <i data-lucide="share" class="w-4 h-4 inline mr-1"></i>
                        Share Progress
                    </button>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                        Close
                    </button>
                    <button class="bg-nuri-primary text-white px-6 py-2 rounded-lg hover:bg-nuri-primary transition-colors">
                        Set New Goals
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        lucide.createIcons();
        
        function closeModal() {
            window.parent.postMessage('closeModal', '*');
        }
        
        // Initialize charts after DOM is loaded
        setTimeout(() => {
            const moodCtx = document.getElementById('moodChart').getContext('2d');
            new Chart(moodCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Mood Score',
                        data: [7, 8, 6, 5, 7, 8, 7],
                        borderColor: '#6048EB',
                        backgroundColor: 'rgba(73, 122, 255, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#6048EB',
                        pointBorderColor: '#6048EB'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 10,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            const activityCtx = document.getElementById('activityChart').getContext('2d');
            new Chart(activityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Exercise', 'Nutrition', 'Mood', 'Fasting'],
                    datasets: [{
                        data: [25, 35, 20, 20],
                        backgroundColor: ['#6048EB', '#043178', '#4F3BC9', '#5B8CFF'],
                        borderWidth: 0,
                        cutout: '60%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }, 100);
    </script>
</body>
</html>
